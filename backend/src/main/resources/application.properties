spring.application.name=dlms-backend
server.port=8080

# ----------------------------------------
# 1. DATABASE CONFIGURATION
# ----------------------------------------

# Primary MySQL Database (Auth, Enrollment)
spring.datasource.url=${TIDB_URL}
spring.datasource.username=${TIDB_USER}
spring.datasource.password=${TIDB_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# MongoDB Database (Course, Media)
# Using Course DB as primary for the monolith. 
# NOTE: If Media data is in a separate DB, it needs to be migrated or a secondary datasource configured.
spring.data.mongodb.uri=${COURSE_MONGODB_URI}

# Disable Flyway (if present) to avoid migration errors during refactor
spring.flyway.enabled=false

# ----------------------------------------
# 2. FILE UPLOAD CONFIGURATION
# ----------------------------------------
spring.servlet.multipart.max-file-size=500MB
spring.servlet.multipart.max-request-size=500MB

# ----------------------------------------
# 3. SECURITY & JWT (From Auth Service)
# ----------------------------------------
# Ensure you set a strong secret in environment variables
application.security.jwt.secret-key=${JWT_SECRET_KEY}
application.security.jwt.expiration=${JWT_EXPIRATION:86400000}
application.security.jwt.refresh-token.expiration=${JWT_REFRESH_EXPIRATION:604800000}

# ----------------------------------------
# 4. EXTERNAL SERVICES
# ----------------------------------------

# IPFS / Pinata (From Media Service)
pinata.api.key=${PINATA_API_KEY}
pinata.secret.api.key=${PINATA_SECRET_API_KEY}

# Python Chatbot Service
chatbot.service.url=${CHATBOT_SERVICE_URL:http://localhost:8000}

# ----------------------------------------
# 5. CORs (Global)
# ----------------------------------------
spring.graphql.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000}
